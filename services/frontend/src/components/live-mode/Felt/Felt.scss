@use '../../../styles/Variables' as *;

.live-table {
  display: flex;
  justify-content: center;
  overflow: visible;
  padding-top: clamp(120px, 18vh, 120px);
  margin-bottom: clamp(10rem, 22vh, 14rem); /* Increased to accommodate chips and bottom seats */
  
  /* Increased padding for side seats and chip displays */
  padding-left: clamp(140px, 16vw, 220px);
  padding-right: clamp(140px, 16vw, 220px);

  @media (max-width: 768px) {
    margin-bottom: clamp(7rem, 17vh, 10rem);
    padding-left: clamp(50px, 8vw, 80px);
    padding-right: clamp(50px, 8vw, 80px);
  }
}

.felt {
  position: relative;
  width: clamp(400px, 100vw, 1650px);
  aspect-ratio: 14 / 5;
  height: auto;
  margin: clamp(40px, 10vh, 160px) auto 0;
  border-radius: 9999px;
  background: radial-gradient(
      circle at 50% 50%,
      rgba(0, 0, 0, 0.18),
      rgba(0, 0, 0, 0.28)
    ),
    var(--table-felt, #0b5);
  border: 6px solid var(--border-color);
  box-shadow: inset 0 0 48px rgba(0, 0, 0, 0.28),
    0 8px 20px rgba(0, 0, 0, 0.2);
  overflow: visible;

  /* Mobile: Switch to vertical orientation with reduced height */
  @media (max-width: 768px) {
    aspect-ratio: 5 / 11;
    width: clamp(280px, 85vw, 400px);
    margin: clamp(16px, 4vh, 40px) auto 0;
    border: 4px solid var(--border-color);
    box-shadow: inset 0 0 32px rgba(0, 0, 0, 0.28),
      0 6px 16px rgba(0, 0, 0, 0.2);
  }

  @media (max-width: 480px) {
    aspect-ratio: 5 / 10;
    width: clamp(260px, 80vw, 360px);
  }

  /* Dynamic offsets for seat groups to avoid overlapping the boards */
  --seatsTopTranslate: 0px;
  --seatsBottomTranslate: 0px;

  > .board-container {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    padding: 6px 8px;
    gap: clamp(8px, 2vw, 24px);
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: row-reverse; /* pot panel on the left, boards on the right */

    /* Mobile: Stack vertically for vertical felt */
    @media (max-width: 768px) {
      flex-direction: column;
      gap: clamp(4px, 1vw, 10px);
      padding: 4px 6px;
    }
  }
}

/* Board presentation: subtle gray backplate to make it pop out of the felt */
.felt .board {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: clamp(8px, 1.5vw, 16px);
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.18);

  /* Mobile: More compact board styling */
  @media (max-width: 768px) {
    border-radius: 8px;
    padding: clamp(4px, 1vw, 8px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.18);
  }
}

.felt .boards-vertical {
  display: flex;
  flex-direction: column;
  gap: clamp(8px, 1.25vw, 14px);

  /* Mobile: Tighter spacing */
  @media (max-width: 768px) {
    gap: clamp(2px, 0.8vw, 6px);
  }
}

.felt .single-board h2 {
  margin: 0 0 6px 0;
  font-size: 0.95rem;
  color: var(--text-secondary);
  text-align: center;

  /* Mobile: Smaller text */
  @media (max-width: 768px) {
    font-size: 0.8rem;
    margin: 0 0 4px 0;
  }
}

.felt .board-cards {
  display: flex;
  gap: 8px;
  justify-content: center;

  /* Mobile: Tighter card spacing */
  @media (max-width: 768px) {
    gap: 2px;
  }
}

/* Pot panel positioned to the left of boards inside the felt overlay */
.felt .pot-display {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: flex-end;
  justify-content: center;
  min-width: 160px;

  /* Mobile: More compact pot display */
  @media (max-width: 768px) {
    gap: 4px;
    min-width: 120px;
    align-items: center;
  }
}

.felt .pot-display .main-pot,
.felt .pot-display .total-pot,
.felt .pot-display .side-pots {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 8px 12px;
  width: 100%;
  text-align: right;

  /* Mobile: More compact pot styling */
  @media (max-width: 768px) {
    border-radius: 6px;
    padding: 4px 8px;
    text-align: center;
    font-size: 0.85rem;
  }
}

.felt .pot-display .side-pot {
  margin-top: 6px;

  /* Mobile: Tighter side pot spacing */
  @media (max-width: 768px) {
    margin-top: 3px;
  }
}

.felt-branding {
  display: none;
}

.table-seats {
  position: absolute;
  inset: 0;
  z-index: 30;

  .seat {
    position: absolute;
    transform: translate(-50%, -50%);
  }

  /* Group wrappers that only translate on Y axis, preserving X positions of seats */
  .seats-top {
    position: static;
    /* Y-translation now applied directly on top seat elements */
  }

  .seats-bottom {
    position: static;
    /* Y-translation now applied directly on bottom seat elements */
  }
}

@for $i from 0 through 7 {
  .seat-#{$i} {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 11;
    border-radius: 12px;
  }
}

.seat-0,
.seat-1,
.seat-2,
.seat-3,
.seat-4,
.seat-5,
.seat-6,
.seat-7 {
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.35));
}

.seat-2,
.seat-6 {
  z-index: 20;
}

.seat-3,
.seat-4,
.seat-5 {
  z-index: 10;
}

.table-seats .seat-0 {
  top: -18%;
  left: 50%;
  transform: translate(-50%, calc(-50% + var(--seatsTopTranslate)));
}
.table-seats .seat-1 {
  top: -18%;
  left: 80%;
  transform: translate(-50%, calc(-50% + var(--seatsTopTranslate)));
}
.table-seats .seat-2 {
  top: 50%;
  left: 100%;
  transform: translate(-50%, -50%);
  /* Responsive positioning to stay within viewport */
  margin-left: clamp(20px, 3vw, 60px);
}
.table-seats .seat-3 {
  top: 114%;
  left: 80%;
  transform: translate(-50%, calc(-50% + var(--seatsBottomTranslate)));
}
.table-seats .seat-4 {
  top: 114%;
  left: 50%;
  transform: translate(-50%, calc(-50% + var(--seatsBottomTranslate)));
}
.table-seats .seat-5 {
  top: 114%;
  left: 20%;
  transform: translate(-50%, calc(-50% + var(--seatsBottomTranslate)));
}
.table-seats .seat-6 {
  top: 50%;
  left: 0%;
  transform: translate(-50%, -50%);
  /* Responsive positioning to stay within viewport */
  margin-left: clamp(-60px, -3vw, -20px);
}
.table-seats .seat-7 {
  top: -18%;
  left: 20%;
  transform: translate(-50%, calc(-50% + var(--seatsTopTranslate)));
}

/* Responsive adjustments for different screen sizes */
@media (max-width: 1200px) {
  .live-table {
    padding-left: clamp(100px, 12vw, 150px);
    padding-right: clamp(100px, 12vw, 150px);
    margin-bottom: clamp(7rem, 18vh, 10rem); /* Slightly reduced for medium screens */
  }
  
  .table-seats .seat-2 {
    margin-left: clamp(15px, 2.5vw, 45px);
  }
  
  .table-seats .seat-6 {
    margin-left: clamp(-45px, -2.5vw, -15px);
  }
}

@media (max-width: 768px) {
  .live-table {
    padding-left: clamp(36px, 6vw, 64px);
    padding-right: clamp(36px, 6vw, 64px);
    padding-top: clamp(60px, 10vh, 100px);
    margin-bottom: clamp(8rem, 20vh, 14rem);
  }
  
  /* Mobile: Reposition seats for vertical felt - properly anchored to edges */
  .table-seats .seat-0 {
    top: 0%;
    left: 50%;
    transform: translate(-50%, calc(-100% - 8px + var(--seatsTopTranslate)));
  }
  
  .table-seats .seat-1 {
    top: 8%;
    left: 85%;
    transform: translate(-50%, calc(-100% - 4px + var(--seatsTopTranslate)));
  }
  
  .table-seats .seat-2 {
    top: 50%;
    left: 100%;
    transform: translate(calc(-100% - 10px), -50%);
  }
  
  .table-seats .seat-3 {
    top: 92%;
    left: 85%;
    transform: translate(-50%, calc(4px + var(--seatsBottomTranslate)));
  }
  
  .table-seats .seat-4 {
    top: 100%;
    left: 50%;
    transform: translate(-50%, calc(8px + var(--seatsBottomTranslate)));
  }
  
  .table-seats .seat-5 {
    top: 92%;
    left: 15%;
    transform: translate(-50%, calc(4px + var(--seatsBottomTranslate)));
  }
  
  .table-seats .seat-6 {
    top: 50%;
    left: 0%;
    transform: translate(calc(10px), -50%);
  }
  
  .table-seats .seat-7 {
    top: 8%;
    left: 15%;
    transform: translate(-50%, calc(-100% - 4px + var(--seatsTopTranslate)));
  }
}

@media (max-width: 480px) {
  .live-table {
    padding-left: clamp(28px, 5vw, 48px);
    padding-right: clamp(28px, 5vw, 48px);
    padding-top: clamp(48px, 8vh, 80px);
    margin-bottom: clamp(7rem, 18vh, 12rem);
  }
  
  /* Even more compact seat positioning for small phones */
  .table-seats .seat-0 {
    top: 0%;
    transform: translate(-50%, calc(-100% - 6px + var(--seatsTopTranslate)));
  }
  
  .table-seats .seat-1 {
    left: 82%;
    top: 10%;
    transform: translate(-50%, calc(-100% - 3px + var(--seatsTopTranslate)));
  }
  
  .table-seats .seat-7 {
    left: 18%;
    top: 10%;
    transform: translate(-50%, calc(-100% - 3px + var(--seatsTopTranslate)));
  }
  
  .table-seats .seat-2 {
    transform: translate(calc(-100% - 8px), -50%);
  }
  
  .table-seats .seat-6 {
    transform: translate(calc(8px), -50%);
  }
  
  .table-seats .seat-3 {
    left: 82%;
    top: 90%;
    transform: translate(-50%, calc(3px + var(--seatsBottomTranslate)));
  }
  
  .table-seats .seat-5 {
    left: 18%;
    top: 90%;
    transform: translate(-50%, calc(3px + var(--seatsBottomTranslate)));
  }
  
  .table-seats .seat-4 {
    top: 100%;
    transform: translate(-50%, calc(6px + var(--seatsBottomTranslate)));
  }
}
