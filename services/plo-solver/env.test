# ===========================================
# PLO Solver - Staging Environment
# ===========================================
#
# This file can be used for local development or as a template.
# For GitHub Actions deployments, variables are read from GitHub Variables:
# - ${{ vars.NODE_ENV }} instead of hardcoded values
# - ${{ vars.REACT_APP_API_URL }} for API configuration
# - ${{ vars.REACT_APP_FEATURE_* }} for feature flags
#
# See docs/GITHUB_VARIABLES_SETUP.md for configuration details.

# Environment Configuration
NODE_ENV=test
FLASK_DEBUG=true
ENVIRONMENT=test
BUILD_ENV=test
QUEUE_PROVIDER=rabbitmq
TESTING=true

LOG_PATH=/var/log/plosolver
SYSTEM_LOG_PATH=/var/log
DOCKER_LOG_PATH=/var/log/docker.log
TRAEFIK_LOG_PATH=/var/log/traefik

# Docker Configuration
BUILD_ENV=production
VOLUME_MODE=ro
RESTART_POLICY=unless-stopped

# Domain Configuration
FRONTEND_DOMAIN=frontend
TRAEFIK_DOMAIN=traefik

# Traefik Configuration
TRAEFIK_DASHBOARD_ENABLED=true
TRAEFIK_DASHBOARD_PORT=8080
TRAEFIK_HTTPS_ENABLED=true
TRAEFIK_HTTPS_PORT=4443
TRAEFIK_LOG_LEVEL=WARNING
LOG_LEVEL=WARNING
ACME_EMAIL=admin@ploscope.com
TRAEFIK_ACME_EMAIL=admin@ploscope.com


# Flask Configs
FLASK_APP=core.app
PORT=5001
FLASK_DEBUG=true
FLASK_ENV=testing
FLASK_USE_RELOADER=false
WEBSOCKET_CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:3001,http://127.0.0.1:3001,http://localhost,http://127.0.0.1,http://*.ngrok-free.app,https://ploscope.com,http://frontend

# API Configuration
REACT_APP_API_URL=/api

# OAuth Configuration
REACT_APP_GOOGLE_CLIENT_ID=your-staging-google-client-id
REACT_APP_FACEBOOK_APP_ID=your-staging-facebook-app-id

# Database Configuration
POSTGRES_USER=testuser
POSTGRES_PASSWORD=testpassword
POSTGRES_DB=plosolver
POSTGRES_HOST=db
DATABASE_URL=postgresql://testuser:testpassword@db:5432/plosolver

# PostgreSQL Volume Paths
# For staging, use local directories (can be overridden for deployment)
POSTGRES_DATA_PATH=/mnt/volume-hil-1/data
POSTGRES_BACKUP_PATH=./backups

# RABBITMQ
RABBITMQ_VHOST=/plosolver
RABBITMQ_USERNAME=plosolver
RABBITMQ_PASSWORD=dev_password_2024
RABBITMQ_DEFAULT_USER=plosolver
RABBITMQ_DEFAULT_PASS=dev_password_2024
RABBITMQ_DEFAULT_VHOST=/plosolver
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_SPOT_QUEUE=spot-processing
RABBITMQ_SOLVER_QUEUE=solver-processing
RABBITMQ_SPOT_DLQ=spot-processing-dlq
RABBITMQ_SOLVER_DLQ=solver-processing-dlq

# Redis Configuration
REDIS_URL=redis://:test_redis_password_2024@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=test_redis_password_2024
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://:test_redis_password_2024@redis:6379/0
RATELIMIT_STORAGE_URL=redis://:test_redis_password_2024@redis:6379/0

# Celery Configuration
CELERY_RESULT_BACKEND=redis://:test_redis_password_2024@redis:6379/0
CELERY_WORKER_CONCURRENCY=8
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_HEALTH_PORT=5002

# Security
SECRET_KEY=test-jwt-secret-key-for-integration-tests
JWT_SECRET_KEY=test-jwt-secret-key-for-integration-tests

# Forum Configuration (optional)
DISCOURSE_ENABLED=false
DISCOURSE_URL=https://forum.crostamusic.com
DISCOURSE_DOMAIN=forum.crostamusic.com
DISCOURSE_PORT=4080
DISCOURSE_VERSION=2.0.20241202-1135
DISCOURSE_SSO_SECRET=your-staging-sso-secret
DISCOURSE_WEBHOOK_SECRET=your-staging-webhook-secret
DISCOURSE_DB_PASSWORD=your-staging-discourse-password
DISCOURSE_DEVELOPER_EMAILS=admin@crostamusic.com

ELK_ENABLED=true

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your_staging_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_staging_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_staging_webhook_secret
STRIPE_PRICE_PRO_MONTHLY=price_test_pro_monthly
STRIPE_PRICE_PRO_YEARLY=price_test_pro_yearly
STRIPE_PRICE_ELITE_MONTHLY=price_test_elite_monthly
STRIPE_PRICE_ELITE_YEARLY=price_test_elite_yearly


# Feature Flags Configuration
# ---------------------------
# Control which features are selectable on the home page
# Set to 'true' to enable, 'false' to disable
# If not set, defaults to the values specified below
#
# These can be overridden by GitHub Variables:
# REACT_APP_FEATURE_TRAINING_MODE_ENABLED=${{ vars.REACT_APP_FEATURE_TRAINING_MODE_ENABLED }}
# REACT_APP_FEATURE_SOLVER_MODE_ENABLED=${{ vars.REACT_APP_FEATURE_SOLVER_MODE_ENABLED }}

# Training Mode - Practice scenarios and skill development
REACT_APP_FEATURE_TRAINING_MODE_ENABLED=false

# Solver Mode - Advanced GTO solver capabilities
REACT_APP_FEATURE_SOLVER_MODE_ENABLED=true

# Player Profiles - Opponent modeling and tendency tracking
REACT_APP_FEATURE_PLAYER_PROFILES_ENABLED=false

# Hand History Analyzer - Upload and analyze hand histories
REACT_APP_FEATURE_HAND_HISTORY_ANALYZER_ENABLED=false

# Tournament Mode - Tournament-specific features and analysis
REACT_APP_FEATURE_TOURNAMENT_MODE_ENABLED=false

# Cash Game Mode - Cash game-specific features and analysis
REACT_APP_FEATURE_CASH_GAME_MODE_ENABLED=false

# Custom Mode - Custom game mode features
REACT_APP_FEATURE_CUSTOM_MODE_ENABLED=false

REACT_APP_FEATURE_SOCIAL_LOGIN_ENABLED=false
