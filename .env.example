# ============================================
# PLOScope Stack Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!
#
# The setup.sh script will auto-generate secure passwords
# for most values. You only need to configure OAuth and
# payment integrations manually.

# ============================================
# GENERAL
# ============================================
ENVIRONMENT=development
DOMAIN=localhost
LOG_LEVEL=INFO

# ============================================
# DATABASE (PostgreSQL)
# ============================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=plosolver
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Full DATABASE_URL (constructed from above, but can override)
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ============================================
# REDIS
# ============================================
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_HOST=redis
REDIS_PORT=6379

# ============================================
# RABBITMQ
# ============================================
RABBITMQ_USERNAME=plosolver
RABBITMQ_PASSWORD=CHANGE_ME_RABBITMQ_PASSWORD
RABBITMQ_VHOST=/plosolver
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672

# Queue names (these are defaults, usually don't need to change)
RABBITMQ_SPOT_QUEUE=spot-processing
RABBITMQ_SOLVER_QUEUE=solver-processing
RABBITMQ_SPOT_DLQ=spot-processing-dlq
RABBITMQ_SOLVER_DLQ=solver-processing-dlq
RABBITMQ_MAIN_EXCHANGE=plosolver.main
RABBITMQ_DLQ_EXCHANGE=plosolver.dlq

# ============================================
# APPLICATION SECRETS
# ============================================
# These should be long random strings. Generate with:
#   openssl rand -base64 32

SECRET_KEY=CHANGE_ME_GENERATE_SECURE_KEY
JWT_SECRET_KEY=CHANGE_ME_GENERATE_JWT_KEY

# ============================================
# GOOGLE OAUTH (Required for Google Sign-In)
# ============================================
# 1. Go to https://console.cloud.google.com/
# 2. Create a project or select existing
# 3. Enable Google+ API
# 4. Create OAuth 2.0 credentials
# 5. Add authorized redirect URIs:
#    - http://localhost:5001/api/auth/google/callback (dev)
#    - https://yourdomain.com/api/auth/google/callback (prod)

GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ============================================
# STRIPE (Required for Payments)
# ============================================
# 1. Create account at https://stripe.com
# 2. Get API keys from Dashboard > Developers > API keys
# 3. Create webhook endpoint for /api/stripe/webhook
# 4. Create products/prices in Stripe Dashboard

STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Price IDs from Stripe Dashboard
STRIPE_PRICE_PRO_MONTHLY=price_...
STRIPE_PRICE_PRO_YEARLY=price_...
STRIPE_PRICE_ELITE_MONTHLY=price_...
STRIPE_PRICE_ELITE_YEARLY=price_...

# ============================================
# TRAEFIK / SSL
# ============================================
TRAEFIK_DOMAIN=localhost
TRAEFIK_LOG_LEVEL=INFO

# For production with Let's Encrypt:
TRAEFIK_HTTPS_ENABLED=false
ACME_EMAIL=admin@example.com

# ============================================
# FRONTEND
# ============================================
FRONTEND_TAG=latest

# API URL (relative for same-origin, or full URL for separate domains)
REACT_APP_API_URL=/api

# Feature flags
REACT_APP_FEATURE_TRAINING_MODE_ENABLED=false
REACT_APP_FEATURE_SOLVER_MODE_ENABLED=true
REACT_APP_FEATURE_PLAYER_PROFILES_ENABLED=false
REACT_APP_FEATURE_HAND_HISTORY_ANALYZER_ENABLED=false
REACT_APP_FEATURE_TOURNAMENT_MODE_ENABLED=false
REACT_APP_FEATURE_CASH_GAME_MODE_ENABLED=false

# Analytics (all optional)
REACT_APP_GA_MEASUREMENT_ID=
REACT_APP_ENABLE_GA=false
REACT_APP_CLARITY_PROJECT_ID=
REACT_APP_ENABLE_CLARITY=false
REACT_APP_POSTHOG_API_KEY=
REACT_APP_POSTHOG_HOST=https://app.posthog.com
REACT_APP_ENABLE_POSTHOG=false

# ============================================
# BACKEND
# ============================================
BACKEND_TAG=latest
FLASK_DEBUG=false
FLASK_ENV=production

# CORS - comma-separated list of allowed origins
WEBSOCKET_CORS_ORIGINS=http://localhost:3000,https://ploscope.com

# Credit system defaults
DEFAULT_CREDITS=100
CREDIT_COST_PER_SOLVE=1

# Signup limiting (0 = unlimited)
SIGNUP_LIMIT=0

# ============================================
# CELERY WORKER
# ============================================
CELERY_WORKER_TAG=latest
CELERY_WORKER_CONCURRENCY=4

# ============================================
# INIT CONTAINERS
# ============================================
DB_INIT_TAG=latest
RABBITMQ_INIT_TAG=latest

# ============================================
# MONITORING (Optional)
# ============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD
GRAFANA_DOMAIN=grafana.localhost
PROMETHEUS_RETENTION_DAYS=7

# ============================================
# NEXUS (Private Package Registry)
# ============================================
# Only needed when building images from source.
# If you don't have a Nexus instance, you'll need to
# modify the Dockerfiles to use public PyPI.

NEXUS_PYPI_USERNAME=
NEXUS_PYPI_PASSWORD=
PIP_INDEX_URL=https://pypi.org/simple
PIP_TRUSTED_HOST=pypi.org

# ============================================
# DISCOURSE FORUM (Optional)
# ============================================
# For SSO integration with a Discourse forum

DISCOURSE_URL=
DISCOURSE_DOMAIN=
DISCOURSE_SSO_SECRET=

# ============================================
# NEW RELIC (Optional)
# ============================================
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_ENVIRONMENT=development

# ============================================
# EMAIL (Optional)
# ============================================
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_DEFAULT_SENDER=
